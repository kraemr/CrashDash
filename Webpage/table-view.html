<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>
      .page-numbers {
          bottom: 10px;
          right: 10px;
          font-size: 14px;
          color: #555;
      }

      .pagination{
        display: flex;
        margin-right: 10px;
      }

      .pagination-buttons {
          display: flex;
          justify-content: space-between;
          margin-top: 10px;
      }

      .pagination-buttons button {
          padding: 5px 10px;
          font-size: 14px;
          cursor: pointer;
      }

  </style>
  </head>

  <script>
  
  currentPage = 1;
  function addRow(region,fatal,date,id) {
    var tableBody = document.querySelector('#table-data tbody');
    var newRow = tableBody.insertRow();
    var cell1 = newRow.insertCell(0);
    var cell2 = newRow.insertCell(1);
    var cell3 = newRow.insertCell(2);
    var cell4 = newRow.insertCell(2);
    cell1.innerHTML = region;
    cell2.innerHTML = fatal;
    cell3.innerHTML = date;
  }
  function removeAllRows() {
      var tableBody = document.querySelector('#table-data tbody');
      tableBody.innerHTML = '';
  }

  function updatePagination() {
            const paginationContainer = document.getElementById('pagination');
            paginationContainer.innerHTML = '';
            const page = document.createElement('span');
            page.textContent = "Page: ";
            for (let i = currentPage; i <= currentPage + 3; i++) {
                    const pageNumber = document.createElement('span');
                    pageNumber.textContent = i + ' ';
                    if (i === currentPage) {
                      pageNumber.style.fontWeight = 'bold';
                    }
                    paginationContainer.appendChild(pageNumber);
            }

            if (currentPage + 5 < 10) {  // Assuming there are 10 pages, you can adjust this
              const ellipsis = document.createElement('span');
              ellipsis.textContent = '... ';
              paginationContainer.appendChild(ellipsis);
          }
      }
  function loadpage(){
    updatePagination();
    removeAllRows();
    var xhr = new XMLHttpRequest();
    console.log( "../php/get-pages.php?page="+currentPage);
    xhr.open('GET', "../php/get-pages.php?page="+currentPage, true);
    xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      var data = JSON.parse(xhr.responseText);
      console.log(data);
      data.forEach(element => {
      addRow(element["land"],element["type"],element["year"])
      console.log(element);   
      }); //foreach 
      } // call back
    };
    xhr.send();
    console.log(xhr.responseText);
  }
  // go back or forth :)
  function changepage(action){
    if(action === "next"){
      currentPage++;
    }
    else if(action === "prev"){
      currentPage--;
    }
    loadpage();
  }
  window.onload = loadpage;
  </script>

  <body>
  <div class="navbar">
    <div class="logo">
      <a href="home.html">
          <img src="img/logo.jpg" alt="logo">
      </a>
  </div>
    <ul class="nav-menu">
      <li><a href="home.html">Home</a></li>
      <li><a href="dashboad.html">Dashboard</a></li>
      <li><a href="map.html">Map</a></li>
      <li><a href="table-view.html">Table-View</a></li>
    </ul>
  </div>


  <div class="content">
    <div class="page-numbers" id="pagination">

    </div>
    
    <div class="pagination-buttons">
      <button onclick="changepage('back')">Back</button>
      <button onclick="changepage('next')">Next</button>
    </div>

    <table id="table-data" border="1">
      <thead>
          <tr>
              <th>region</th>
              <th>fatality</th>
              <th>date</th>
          </tr>
      </thead>
      <tbody>
          <!-- Existing rows or leave it empty if there are none initially -->
      </tbody>
  </table>
  </div> 
  


</body>
</html>
